# QuickCart Environment Variables
# ==============================================================================
# This file contains all environment variables used by the application.
# For local development, you only need to fill in the REQUIRED variables.
# The default values are pre-configured for the local Docker Compose setup.
#
# INSTRUCTIONS:
# 1. Copy this file to .env: `cp .env.template .env`
# 2. Fill in the values for the "REQUIRED" section.
# 3. (Optional) Review and change the "OPTIONAL" values if needed.
# ==============================================================================

# ========================================
# REQUIRED - Must be set
# ========================================

# --- Telegram Bot ---
# Get this from @BotFather on Telegram
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here

# --- Admin Users ---
# Your personal Telegram User ID (comma-separated for multiple admins)
# You can get your ID from bots like @userinfobot
ADMIN_USER_IDS=your_telegram_user_id_here

# --- Pakasir Integration ---
# Get these from your Pakasir project dashboard
PAKASIR_API_KEY=your_pakasir_api_key_here
PAKASIR_PROJECT_SLUG=your_pakasir_project_slug_here

# --- Security ---
# Generate strong random strings for these (e.g., using `openssl rand -hex 32`)
SECRET_KEY=your_32_byte_secret_key
ENCRYPTION_KEY=your_32_byte_encryption_key

# ========================================
# DATABASE - Pre-configured for local Docker
# ========================================
# These are the default credentials used by the `docker-compose.yml` services.
# You should only change these if you are NOT using the local Docker setup.

# --- Main Database ---
POSTGRES_USER=quickcart
POSTGRES_PASSWORD=quickcart
POSTGRES_DB=quickcart
DATABASE_URL=postgresql+asyncpg://quickcart:quickcart@db:5432/quickcart

# --- Audit Database ---
AUDIT_POSTGRES_USER=quickcart_audit
AUDIT_POSTGRES_PASSWORD=quickcart_audit
AUDIT_POSTGRES_DB=quickcart_audit
AUDIT_DATABASE_URL=postgresql+asyncpg://quickcart_audit:quickcart_audit@audit_db:5432/quickcart_audit

# ========================================
# OPTIONAL - Has sensible defaults
# ========================================

# --- Environment ---
# Set to "production" for production deployments
ENVIRONMENT=development
DEBUG=True
LOG_LEVEL=INFO

# --- Redis ---
# URL for Redis cache. Leave empty to use in-memory fallback (not recommended for production).
# The default is pre-configured for the local Docker Compose setup.
REDIS_URL=redis://redis:6379/0

# --- Database Pool (Advanced) ---
# Adjust these for high-load production environments if needed.
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
AUDIT_DB_POOL_SIZE=2
AUDIT_DB_MAX_OVERFLOW=5

# --- Session TTL ---
# How long user sessions last in the bot (in seconds). Default is 24 hours.
SESSION_TTL_SECONDS=86400

# --- Pakasir Settings ---
# Base URL for Pakasir API
PAKASIR_BASE_URL=https://app.pakasir.com
# Custom domain for payment links
PAKASIR_PAYMENT_CUSTOM_DOMAIN=https://pots.my.id
# Webhook secret for verifying Pakasir webhooks (highly recommended for production)
PAKASIR_WEBHOOK_SECRET=

# --- Payment Logic ---
# Fee structure: (subtotal * percentage) + fixed_fee
PAYMENT_FEE_PERCENTAGE=0.007
PAYMENT_FEE_FIXED=310
# How long a payment link is valid (in minutes)
PAYMENT_EXPIRY_MINUTES=10

# --- Gameplay Logic ---
# Cooldown period for using vouchers (in seconds). Default is 5 minutes.
VOUCHER_COOLDOWN_SECONDS=300

# --- Refund Logic ---
# Multipliers for calculating refund amounts based on different conditions
REFUND_MULTIPLIER_UNDER_7_DAYS=0.8
REFUND_MULTIPLIER_7_PLUS_DAYS=0.7
REFUND_MULTIPLIER_1_2_CLAIMS=0.6
REFUND_MULTIPLIER_3_CLAIMS=0.5
REFUND_MULTIPLIER_OVER_3_CLAIMS=0.4

# --- Store Customization ---
STORE_NAME="QuickCart Store"
DOCUMENTATION_URL="https://notion.so/quickcart-docs"
# Welcome sticker file ID to send to new users
TELEGRAM_WELCOME_STICKER="CAACAgIAAxkBAAIDbWkLZHuqPRCqCqmL9flozT9YJdWOAAIZUAAC4KOCB7lIn3OKexieNgQ"

# --- Observability ---
# Sentry DSN for error tracking in production
SENTRY_DSN=
